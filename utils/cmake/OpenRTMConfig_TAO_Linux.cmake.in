# -*- cmake -*-
#
# @file OpenRTMConfig.cmake
# @brief cmake-config file for OpenRTM-aist
# @author Noriaki Ando
#
# This file is used for cmake config-mode.
# The following variables are defined.
#
# Basic compiler/linker options
# - OPENRTM_CFLAGS: cflags 
# - OPENRTM_INCLUDE_DIRS: include directories
# - OPENRTM_LDFLAGS: linker options
# - OPENRTM_LIBRARY_DIRS: library directories
# - OPENRTM_LIBRARIES: libraries
# - OPENRTM_LIB_DIR: OpenRTM's lib directory
#
# OpenRTM-aist specific directory
# - COIL_INCLUDE_DIR: coil include dir
# - OPENRTM_INCLUDE_DIR: OpenRTM's include directory
# - OPENRTM_LIB_DIR: OpenRTM's lib directory
# - OPENRTM_DATA_DIR: OpenRTM's shared directory
#
# OpenRTM-aist version
# - OPENRTM_VERSION: x.y.z version
# - OPENRTM_VERSION_MAJOR: major version number
# - OPENRTM_VERSION_MINOR: minor version number
# - OPENRTM_VERSION_PATCH: revision number
# - OPENRTM_SHORT_VERSION: short version number 1.1.0->110
#
# OpenRTM-aist's CORBA related settings
# - OPENRTM_ORB: CORBA implementation
# - OPENRTM_IDL_WRAPPER: rtm-skelwrapper command
# - OPENRTM_IDL_WRAPPER_FLAGS: rtm-skelwrapper flag
# - OPENRTM_IDLC: IDL command
# - OPENRTM_IDLFLAGS: IDL optins

message(STATUS "OpenRTMConfig.cmake(version 2.0) found.")
message(STATUS "Configrued by configuration mode.")


# Basic compiler/linker options
set(OPENRTM_CFLAGS @COIL_C_FLAGS_LIST@ -Wall -fPIC -O2)
set(OPENRTM_INCLUDE_DIRS @CMAKE_INSTALL_PREFIX@/include @CMAKE_INSTALL_PREFIX@/@INSTALL_COIL_INCLUDE_DIR@ @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_INCLUDE_DIR@ @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_INCLUDE_DIR@/rtm/idl @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_INCLUDE_DIR@/rtm/ext)
set(OPENRTM_LDFLAGS -luuid -lrt -ldl -export-dynamic)
set(OPENRTM_LIBRARY_DIRS @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_LIB_DIR@)
set(OPENRTM_LIBRARIES pthread;@OPENRTM_LIBRARIES@)
set(OPENRTM_LIB_DIR @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_LIB_DIR@)
set(OPENRTM_INCLUDE_DIR @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_INCLUDE_DIR@)
set(OPENRTM_DIR @CMAKE_INSTALL_PREFIX@)

# OpenRTM-aist specific directory
set(COIL_INCLUDE_DIR @CMAKE_INSTALL_PREFIX@/@INSTALL_COIL_INCLUDE_DIR@)
set(OPENRTM_DATA_DIR @CMAKE_INSTALL_PREFIX@/@INSTALL_RTM_SHARE_DIR@)

# OpenRTM-aist version
set(OPENRTM_VERSION @RTM_VERSION@)
set(OPENRTM_VERSION_MAJOR @RTM_MAJOR_VERSION@)
set(OPENRTM_VERSION_MINOR @RTM_MINOR_VERSION@)
set(OPENRTM_VERSION_PATCH @RTM_REVISION_NUM@)
set(OPENRTM_SHORT_VERSION @RTM_SHORT_VERSION@)

# OpenRTM-aist's CORBA related settings
set(OPENRTM_ORB TAO)
set(OPENRTM_IDL_WRAPPER rtm2-skelwrapper)
set(OPENRTM_IDL_WRAPPER_FLAGS --include-dir= --skel-suffix=Skel --stub-suffix=Stub)
set(OPENRTM_IDLC tao_idl)



if(NOT PKG_CONFIG_FOUND)
  include(CMakeFindDependencyMacro)
  find_dependency(PkgConfig)
endif()
#
# Getting TAO settings
#
pkg_check_modules(TAO_Svc_Utils REQUIRED TAO_Svc_Utils)
pkg_check_modules(TAO_CosNaming REQUIRED TAO_CosNaming)
pkg_check_modules(TAO_IORTable REQUIRED TAO_IORTable)
pkg_check_modules(TAO_Utils REQUIRED TAO_Utils)
pkg_check_modules(TAO_Strategies REQUIRED TAO_Strategies)
set(ACE_TAO_LIBRARIES ${TAO_Svc_Utils_LIBRARIES} ${TAO_CosNaming_LIBRARIES} ${TAO_IORTable_LIBRARIES} ${TAO_Utils_LIBRARIES} ${TAO_Strategies_LIBRARIES})
set(ACE_TAO_LIBRARY_DIRS ${TAO_Svc_Utils_LIBRARY_DIRS} ${TAO_CosNaming_LIBRARY_DIRS} ${TAO_IORTable_LIBRARY_DIRS} ${TAO_Utils_LIBRARY_DIRS} ${TAO_Strategies_LIBRARY_DIRS})
set(ACE_TAO_INCLUDE_DIRS ${TAO_Svc_Utils_INCLUDE_DIRS} ${TAO_CosNaming_INCLUDE_DIRS} ${TAO_IORTable_INCLUDE_DIRS} ${TAO_Utils_INCLUDE_DIRS} ${TAO_Strategies_INCLUDE_DIRS})
set(ACE_TAO_CFLAGS ${TAO_Svc_Utils_CFLAGS} ${TAO_CosNaming_CFLAGS} ${TAO_IORTable_CFLAGS} ${TAO_Utils_CFLAGS} ${TAO_Strategies_CFLAGS})
set(ACE_TAO_DIR ${TAO_Svc_Utils_PREFIX})


set(TAO_CFLAGS ${ACE_TAO_CFLAGS};)
set(TAO_INCLUDE_DIRS ${ACE_TAO_INCLUDE_DIRS})
set(TAO_LDFLAGS )
set(TAO_LIBRARY_DIRS ${ACE_TAO_LIBRARY_DIRS})
set(TAO_LIBRARIES ${ACE_TAO_LIBRARIES})

set(OPENRTM_CFLAGS ${OPENRTM_CFLAGS} ${TAO_CFLAGS})
set(OPENRTM_INCLUDE_DIRS ${OPENRTM_INCLUDE_DIRS} ${TAO_INCLUDE_DIRS})
set(OPENRTM_LDFLAGS ${OPENRTM_LDFLAGS} ${TAO_LDFLAGS})
set(OPENRTM_LIBRARY_DIRS ${OPENRTM_LIBRARY_DIRS} ${TAO_LIBRARY_DIRS})
set(OPENRTM_LIB_DIR ${OPENRTM_LIB_DIR} ${TAO_LIBRARY_DIRS})
set(OPENRTM_IDLFLAGS -as -DTAO_IDL -I${ACE_TAO_DIR}/include  -I${OPENRTM_INCLUDE_DIR}/rtm/idl)


message(STATUS "OpenRTM-aist configuration done")
# end of OpenRTMConfig.cmake
